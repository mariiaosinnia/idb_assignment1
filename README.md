# Movie Ticket Sales Database

## Опис

Цей проєкт містить базу даних для кінотеатрів, яка дозволяє зберігати інформацію про фільми, кінотеатри, сеанси, клієнтів і куплені квитки.

---

## Таблиці

- **movies**: інформація про фільми (id, назва, жанр, тривалість)
- **cinemas**: інформація про кінотеатри (id, назва, місто)
- **screenings**: розклад сеансів (id, фільм, кінотеатр, час)
- **customers**: клієнти (id, ім’я, email)
- **tickets**: куплені квитки (id, клієнт, сеанс, ціна, час купівлі)

---

## SQL Скрипти

- `create_tables.sql` — створення таблиць
- `insert_data.sql` — вставка по 10 записів у кожну таблицю
- `queries.sql` — запит із використанням:
  - `WITH` для побудови тимчасових таблиць
  - `UNION ALL` для об'єднання жанрів
  - `GROUP BY`, `AVG`, `COUNT` для статистики
  - `ORDER BY` та `LIMIT` для виведення топ-5 фільмів за середньою ціною квитка

---

## Логіка запиту

1. **ticket_info** — об’єднує таблиці, щоб отримати всю інформацію по квитках (фільм, жанр, клієнт, кінотеатр, ціна).
2. **filtered_tickets** — обирає квитки лише для жанрів *Sci-Fi* та *Action*.
3. **stats** — групує дані за назвою фільму та обчислює:
   - кількість проданих квитків (`COUNT(*)`)
   - середню ціну (`AVG(price)`)
4. Результат сортується за спаданням середньої ціни та обмежується 5 рядками (`LIMIT 5`).

## Результат запиту

Запит виводить топ-5 фільмів жанрів *Sci-Fi* та *Action* за середньою ціною квитків у спадному порядку. Для кожного фільму показано:

- Назву фільму
- Жанр
- Кількість проданих квитків
- Середню ціну квитків

![image](https://github.com/user-attachments/assets/2b0b3aad-1a3f-4983-b071-c3dcef14a286)



